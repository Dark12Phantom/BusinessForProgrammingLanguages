<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu - Savory Spot Tavern</title>

    <link rel="icon" href="../images/photo_2025-02-14_21-17-19.png">

    <link rel="stylesheet" href="../css/main-style.css">
    <link rel="stylesheet" href="../css/menu.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
</head>

<body>
    <div class="dashboard-container">
        <div class="wrapper">
            <nav>
                <img src="../images/photo_2025-02-14_21-17-19.png" alt="" class="logo">
                <ul>
                    <li><a href="../index.html"> <svg xmlns="http://www.w3.org/2000/svg" height="24px"
                                viewBox="0 0 24 24" width="24px">
                                <path d="M0 0h24v24H0V0z" fill="none" />
                                <path
                                    d="M12 5.69l5 4.5V18h-2v-6H9v6H7v-7.81l5-4.5M12 3L2 12h3v8h6v-6h2v6h6v-8h3L12 3z" />
                            </svg> Home</a></li>
                    <li><a href="./menu.php" class="active">
                            <svg class="active"
                                xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px"
                                viewBox="0 0 24 24" width="24px">
                                <g>
                                    <rect fill="none" height="24" width="24" />
                                </g>
                                <g>
                                    <g />
                                    <g>
                                        <path
                                            d="M21,5c-1.11-0.35-2.33-0.5-3.5-0.5c-1.95,0-4.05,0.4-5.5,1.5c-1.45-1.1-3.55-1.5-5.5-1.5S2.45,4.9,1,6v14.65 c0,0.25,0.25,0.5,0.5,0.5c0.1,0,0.15-0.05,0.25-0.05C3.1,20.45,5.05,20,6.5,20c1.95,0,4.05,0.4,5.5,1.5c1.35-0.85,3.8-1.5,5.5-1.5 c1.65,0,3.35,0.3,4.75,1.05c0.1,0.05,0.15,0.05,0.25,0.05c0.25,0,0.5-0.25,0.5-0.5V6C22.4,5.55,21.75,5.25,21,5z M21,18.5 c-1.1-0.35-2.3-0.5-3.5-0.5c-1.7,0-4.15,0.65-5.5,1.5V8c1.35-0.85,3.8-1.5,5.5-1.5c1.2,0,2.4,0.15,3.5,0.5V18.5z" />
                                        <g>
                                            <path
                                                d="M17.5,10.5c0.88,0,1.73,0.09,2.5,0.26V9.24C19.21,9.09,18.36,9,17.5,9c-1.7,0-3.24,0.29-4.5,0.83v1.66 C14.13,10.85,15.7,10.5,17.5,10.5z" />
                                            <path
                                                d="M13,12.49v1.66c1.13-0.64,2.7-0.99,4.5-0.99c0.88,0,1.73,0.09,2.5,0.26V11.9c-0.79-0.15-1.64-0.24-2.5-0.24 C15.8,11.66,14.26,11.96,13,12.49z" />
                                            <path
                                                d="M17.5,14.33c-1.7,0-3.24,0.29-4.5,0.83v1.66c1.13-0.64,2.7-0.99,4.5-0.99c0.88,0,1.73,0.09,2.5,0.26v-1.52 C19.21,14.41,18.36,14.33,17.5,14.33z" />
                                        </g>
                                    </g>
                                </g>
                            </svg> Menu</a></li>
                    <li><a href="./about.html"> <svg xmlns="http://www.w3.org/2000/svg" height="24px"
                                viewBox="0 0 24 24" width="24px">
                                <path d="M0 0h24v24H0V0z" fill="none" />
                                <path
                                    d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z" />
                            </svg> About</a></li>
                    <li class="account-item">
                        <a href="" class="account-link">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px">
                                <path d="M0 0h24v24H0V0z" fill="none" />
                                <path
                                    d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0 8c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm-6 4c.22-.72 3.31-2 6-2 2.7 0 5.8 1.29 6 2H9zm-3-3v-3h3v-2H6V7H4v3H1v2h3v3z" />
                            </svg> Account
                            <span class="material-symbols-outlined arrow-icon">keyboard_arrow_right</span>
                        </a>
                        <div class="popover">
                            <a href="account-signup.php" id="signup-link"> <svg
                                    xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px">
                                    <path d="M0 0h24v24H0V0z" fill="none" />
                                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                                </svg> Sign Up</a>
                            <a href="account-login.php" id="login-link"> <svg
                                    xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px"
                                    viewBox="0 0 24 24" width="24px">
                                    <g>
                                        <rect fill="none" height="24" width="24" />
                                    </g>
                                    <g>
                                        <path
                                            d="M11,7L9.6,8.4l2.6,2.6H2v2h10.2l-2.6,2.6L11,17l5-5L11,7z M20,19h-8v2h8c1.1,0,2-0.9,2-2V5c0-1.1-0.9-2-2-2h-8v2h8V19z" />
                                    </g>
                                </svg> Login</a>
                            <a href="account-manage.php" id="profile-link"> <svg
                                    xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px">
                                    <path d="M0 0h24v24H0V0z" fill="none" />
                                    <path
                                        d="M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z" />
                                </svg> Profile</a>
                            <a href="#" id="logout-link"> <svg xmlns="http://www.w3.org/2000/svg"
                                    enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px">
                                    <g>
                                        <path d="M0,0h24v24H0V0z" fill="none" />
                                    </g>
                                    <g>
                                        <path
                                            d="M17,8l-1.41,1.41L17.17,11H9v2h8.17l-1.58,1.58L17,16l4-4L17,8z M5,5h7V3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h7v-2H5V5z" />
                                    </g>
                                </svg> Logout</a>
                        </div>
                    </li>

                </ul>
            </nav>

            <main>
                <?php
                require_once __DIR__ . '/../../dbConnection.php';

                $conn = dbConnection();

                $query = "SELECT * FROM menu";
                $result = $conn->query($query);

                if ($result) {
                    // Get the total number of items in the result set
                    $totalItems = $result->num_rows;

                    // Initialize the iteration counter
                    $i = 1;

                    // Loop through the result set and display the items
                    while ($row = $result->fetch_assoc()) {
                        $stars = '';

                        // Generate filled stars based on the rating
                        for ($starFilled = 0; $starFilled < $row['rating']; $starFilled++) {
                            $stars .= '
                <svg xmlns="http://www.w3.org/2000/svg" class="rating" enable-background="new 0 0 24 24" height="20px" viewBox="0 0 24 24" width="20px" fill="#ffbb00">
                    <g>
                        <path d="M0 0h24v24H0V0z" fill="none"/>
                    </g>
                    <g>
                        <path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27z"/>
                    </g>
                </svg>';
                        }

                        // Generate empty stars for the remaining (up to 5)
                        for ($starEmpty = $row['rating']; $starEmpty < 5; $starEmpty++) {
                            $stars .= '
                <svg xmlns="http://www.w3.org/2000/svg" class="rating" height="20px" viewBox="0 0 24 24" width="20px" fill="#ffbb00">
                    <path d="M0 0h24v24H0V0z" fill="none"/>
                    <path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"/>
                </svg>';
                        }

                        // Display the card for each item
                        echo '<div class="cards card' . $i . '">
                <img src="../images/' . htmlspecialchars($row['image_path']) . '" alt="' . htmlspecialchars($row['name']) . '">
                <div class="description">
                    <p class="name">' . htmlspecialchars($row['name']) . '</p>
                    <div class="stars">' . $stars . '</div>
                    <p class="price">â‚±' . number_format($row['cost'], 2) . '</p>
                </div>
              </div>';

                        $i++;
                    }
                } else {
                    echo "Error: " . $conn->error;
                }
                ?>

            </main>
        </div>
    </div>
</body>

<script src="../scripts/script.js"></script>

</html>